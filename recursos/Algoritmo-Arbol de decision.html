<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>√Årboles de Decisi√≥n ¬∑ Demo Visual</title>
  <style>
    :root{--green:#28c24b;--green-dark:#146314;--green-light:#a4f5b6;--accent:#12c2e9;--accent2:#f64f59;--rad:14px}
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    body{min-height:100vh;font-family:system-ui,Segoe UI,Roboto,sans-serif;background:#021002;color:#fff;display:flex;flex-direction:column;align-items:center;padding:2rem 1rem}
    h1{font-size:clamp(2.2rem,5vw,3.4rem);background:linear-gradient(90deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:1.5rem}
    .card{max-width:1100px;width:100%;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.08);backdrop-filter:blur(8px);border-radius:var(--rad);padding:1rem;box-shadow:0 6px 20px rgb(0 0 0 /.3)}
    h2{font-size:1.5rem;background:linear-gradient(90deg,var(--green-light),#d8ffd8);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:.5rem}
    #treeZone{width:100%;height:450px;border:1px solid rgba(255,255,255,.12);border-radius:8px;margin-top:.5rem}
    .controls{display:flex;gap:.7rem;margin-top:.8rem}
    .btn{padding:.55rem 1.1rem;border:none;border-radius:8px;font-weight:600;color:#fff;background:var(--green);cursor:pointer;transition:background .25s}
    .btn:hover{background:var(--green-dark)}
    .btn.danger{background:var(--accent2)}
    .note{font-size:.9rem;color:var(--green-light);margin-top:.3rem}
  </style>
</head>
<body>
  <h1>√Årboles de Decisi√≥n</h1>
  <section class="card">
    <h2>Demo interactivo (Zoom + Drag)</h2>
    <p class="note">Haz clic en ‚ÄúDividir‚Äù para expandir el √°rbol; usa la rueda o arrastra para explorar.</p>
    <div id="treeZone"></div>
    <div class="controls"><button id="splitBtn" class="btn">‚ûï¬†Dividir</button><button id="resetBtn" class="btn danger">üóëÔ∏è¬†Reset</button></div>
  </section>

  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <script>
    /* ========= helpers ========= */
    const $=sel=>document.querySelector(sel);
    const css=key=>getComputedStyle(document.documentElement).getPropertyValue(key).trim();

    /* ========= state ========= */
    let dataRoot={name:'Root',children:[]};

    /* ========= build ========= */
    const container=$('#treeZone');
    const svg=d3.select(container).append('svg').attr('width','100%').attr('height','100%');
    const g=svg.append('g');
    const layout=d3.tree().nodeSize([60,120]);

    const defs=svg.append('defs');
    function gradient(depth){
      let id=`grad${depth}`;
      if(defs.select(`#${id}`).empty()){
        const lg=defs.append('linearGradient').attr('id',id).attr('x1','0%').attr('x2','100%');
        lg.append('stop').attr('offset','0%').attr('stop-color',depth%2?css('--accent'):css('--green'));
        lg.append('stop').attr('offset','100%').attr('stop-color',depth%2?css('--accent2'):css('--green-light'));
      }
      return `url(#${id})`;
    }

    function render(){
      g.selectAll('*').remove();
      const root=layout(d3.hierarchy(dataRoot));
      // Links
      g.selectAll('path').data(root.links()).join('path')
        .attr('d',d3.linkHorizontal().x(d=>d.y).y(d=>d.x))
        .attr('stroke',css('--green-light')).attr('stroke-width',1.3).attr('fill','none');
      // Nodes
      const nodes=g.selectAll('g').data(root.descendants()).join('g')
        .attr('transform',d=>`translate(${d.y},${d.x})`);
      nodes.append('circle').attr('r',d=>d.depth?14:18)
        .attr('fill',d=>d.children?gradient(d.depth):css('--green-light'))
        .attr('stroke','#fff').attr('stroke-width',1.1);
      nodes.append('text').attr('dy','.35em').attr('x',d=>d.children? -20:20)
        .attr('text-anchor',d=>d.children? 'end':'start').style('fill','#fff').style('font-size','.78rem')
        .text(d=>d.data.name);
      // center viewBox
      const left=d3.min(root.descendants(),d=>d.y),right=d3.max(root.descendants(),d=>d.y);
      const top=d3.min(root.descendants(),d=>d.x),bottom=d3.max(root.descendants(),d=>d.x);
      svg.attr('viewBox',[left-80,top-80,right-left+160,bottom-top+160].join(' '));
    }

    function split(){
      const queue=[dataRoot];
      while(queue.length){
        const n=queue.shift();
        if(!n.children||n.children.length===0){n.children=[{name:'œÉ1'},{name:'œÉ2'}];render();return;}
        queue.push(...n.children);
      }
    }

    $('#splitBtn').addEventListener('click',split);
    $('#resetBtn').addEventListener('click',()=>{dataRoot={name:'Root',children:[]};render();});

    svg.call(d3.zoom().scaleExtent([.5,2]).on('zoom',e=>g.attr('transform',e.transform)));
    window.addEventListener('resize',render);
    render();
  </script>
</body>
</html>

